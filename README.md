##项目名称：唐诗分析器
##项目描述
    分析唐诗中高频出现的词语，各个诗人创作的唐诗数量
##涉及技术
+ Stream流式处理 
+ 文本分词和解析（ ansj ） 
+ 多线程 
+ 网页解析工具（ htmlunit ） 
+ 数据库和JDBC编程 
+ 数据可视化（ HTML/CSS/JavaScript , echarts , jQuery ） 
+ Servlet/Sparkjava嵌入式Web容器/java-httpd
  + Sparkjava 轻量级的Web服务开发框架 
+ 快速构建web应用 
+ DIY构建对象管理工程 

##实现功能
+ 数据采集，清洗，存储 
+ 数据分析，可视化展示

##具体实现
![](images\爬虫.PNG)
  
  
 ##第一天、二：设计
+ htmlUnit库初步分析   
+ 抽象模型：将网页抽象成java对象  OOA（面向对象分析） OOD OOP
   HtmlPage->url,detail,htmlpage,subbpage，data===>page
   因为HtmlPage功能不足
+ 抽象处理流程（采集，解析，清洗）
+ 调度器（爬虫）
 ##第三、四、五天
 + 采集
 + 解析
 + 清洗
 + 存储
 ##第六、七、八、九天
 
 + 查询（从数据库）
   + 业务层：
     + 分析每个诗人的创作数量-->查询结果满足
     + 分析整个诗文中的词频-->查询结果进行分词，分组统计
   + 大数据
     + Spark ：专为大规模数据处理而设计的快速通用的计算引擎，结果保存在内存，实时处理，效率高（数据量大时）
     + Hadoop：分布式文件系统，为海量数据提供存储，磁盘存储，适合离线处理
   + 方案一：
      + 实时分析唐诗情况
      + 采集、解析、清洗、统计分析、存储统计结果
   + 方案二：
      + 离线分析唐诗情况
      + 采集，解析，清洗，存储原始数据，查询，统计分析
 + 中文分词
 + 统计（功能）
 
 ##第十天
 + 对象工厂
    + **Crawler对象通过工厂创建**
    + **Web对象通过工厂创建**
      + ConfigProperties
      + DataSource
      + Parse  、 Pipline 、 AnalyzeService 、 AnalyzeDao
 ##第十一天
 + Web接口
 + 静态文件
 + 前端文件Web接口的交互
 
 ##第十二天
 + 可视化
 + code review
   + 消除重复代码  <完成>
   + 消除硬编码
   + 消除System.out.*,使用日志框架  <完成>
   + 异常处理，资源释放   <完成>
   + 程序配置化，增强灵活性   <完成>
   + 简单，简洁，可扩展（《代码大全》）
   + 发现问题
     + 爬虫启动之后不能停止
       + 方案：调用Crawler.stop()
         + 1、通过一个API
         + 2、通过检测某个信号
 + BUG
   + 准备数据库，数据库的表（不能随意修改字段名或类型）
   + 启动爬虫时，检查网络
   + 爬虫二次启动时，会在数据库中重复加载一样的数据==》
     所以在这个程序中爬虫只能启动一次；
     并且要保证程序运行时间足够长，使它加载完数据。（程序不能自动停止）
 + 总结
   + JAVASE
     + 面向对象
     + 多线程
     + 集合框架
     + 设计模式
     + JDBC编程
     + 数据库
     + 常用类
     + Stream和Lambda
   + 第三方
     + htmlunit
     + Ansj
     + sparkjava
     + Druid（数据库连接池）
   + 前端    
     + HTML
     + JavaScript
     + jQuery
     + Echarts
   + 工具
     + IDEA
     + Maven
     + Git/GitHub
   + 分层结构
   ![](images\分层结构.PNG)
   + 细节
     + 定义接口 =>
     + 实现接口 =>
     + 线程池创建 => 线程数，线程工厂（起名），提交任务，停止线程池
     + 生产者，消费者模型(多生产者，多消费者) => 采集 -> 解析 -> 清洗
     + 阻塞队列，Map结构
     + JDBC编程 => CR（UD）
     + 业务 => 集合遍历，分组，求和
     + Properties =>读取配置文件
     + 对象工厂 => 将系统中所有的对象存储到对象工厂，对象都是单例的。（避免大量创建对象，减少代码的复杂度）
        极其简单的Spring（对象创建，装配，查找）
        
 ## 扩展
 + 应对反爬虫和扩展反反爬虫思路（如果需要用户名和密码，可以将用户名和密码带过去；如果频率太高，禁止访问，可以放在几台电脑上）
 + 通过反射或者自定义注解完成对象工厂中的对象创建和装配
 + Web服务器选择Tomcat和提供Servlet接口
     
 ##    
   + 文档页面（只是一些超链接）
   + 详情页面（是想要的数据）
   + 采集-页面采集客户端（WebClient）
   + 解析-一组解析器Parse
   + 清洗-一组清洗器（管道）Pipeline
   + 线程执行器
  ##
  + 实现一个清洗（管道），将Page中的数据写道数据库
    + 技术：JDBC
    + 数据库：MySQL
    + 数据库的准备工作：创建数据库，设计表，创建表
    + JDBC编程：驱动，DataSource 